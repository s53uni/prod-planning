<a name="top"></a>
  
# SaaS 기반 AI 공정 최적화 시스템의 생산 계획 최적화 모델
🏆 2023 BDIA Dev Contest 미래창업가상 수상 🏆
- 구분: 팀 프로젝트 내 개인별 분석 파일
- 기간: 2023년 9월 7일 ~ 2023년 11월 10일

<details>
  <summary>Table of Contents</summary>
  
  1. [프로젝트 개요](#프로젝트-개요)
  2. [데이터 정의](#데이터-정의)
  3. [프로젝트 과정](#프로젝트-과정)
      + [데이터 전처리](#데이터-전처리)
      + [탐색적 데이터 분석](#탐색적-데이터-분석)
      + [모델 학습](#모델-학습)
      + [원본 데이터와 비교](#원본-데이터와-비교)
  5. [결론](#결론)

</details>
<br>

## 프로젝트 개요
과거의 경험을 기반으로 하는 발주 계획은 생산량 및 발주 수량의 불안정한 변동에 대응하기 어렵다는 문제가 있다. 
특히, 발주 수량을 정확히 예측하기 어려운 경우에는 재고량이 크게 늘어나거나 부족해지는 등의 비효율성이 발생할 수 있다.
따라서, 현 데이터를 활용하여 더 나은 대응이 가능한 최적의 생산 계획 모델을 개발하고자 한다. 
이 모델은 예측 오차를 최소화하고, 신뢰성 있는 발주 수량을 도출함으로써 효율적인 생산 체계를 구축하는 데 중점을 둔다.
<br><br>
이러한 최적의 생산 계획 모델은 생산량과 발주 수량의 불안정성을 최소화하고, 재고 관리를 최적화하여 비용을 절감하며 효율성을 극대화한다. 
데이터 기반의 정확한 예측을 통해 기업의 생산 프로세스를 더욱 효과적으로 향상시키는 것이 목표이다.

<br>

## 데이터 정의
인공지능 중소벤처 제조 플랫폼 KAMP의 공급망 최적화 데이터셋을 사용했다.

<p align="right"><a href="#top">⬆️TOP</a></p>

## 프로젝트 과정
### 데이터 전처리
1. 결측치나 이상치가 존재하지 않음을 확인함
2. 데이터 수집 시간 컬럼을 날짜 타입으로 변환
3. 0부터 116까지 총 117개의 부품을 확인하고 부품별 데이터로 분리함
4. 최종 발주 계획인 하루의 마지막 발주 로그만 남김

<br>

### 탐색적 데이터 분석
#### 부품 번호별 당일 투입 예정 수량 평균 시각화
![부품번호별_당일_투입예정수량_평균](https://github.com/user-attachments/assets/7b8c9da9-3343-486c-abdd-fec531b0e591)
- 각 부품마다 평균적으로 발주하는 수량이 다른 것을 확인함
- 부품들이 비식별화되어 있어 연관성 파악이 어려움

<br>

#### 부품 번호 및 기준 일자별 당일 투입 예정 수량 시각화
![부품 번호 및 기준 일자별 당일 투입예정수량](https://github.com/user-attachments/assets/6bde63f3-4b1e-465e-99bd-a476d3b38195)
- 시각화 결과, 아예 발주가 없거나 하루 이틀만 발주되는 긴급 발주 부품이 있는 것으로 확인됨
- 긴급 발주 부품의 예측이 어려울 것으로 판단하여, 긴급 발주 부품은 학습에서 제외하기로 결정함
- 부품 번호별로 발주가 없는 날을 카운트하여, 발주가 없는 날이 가장 적은 상위 5개 부품을 선정한 후 학습을 진행함

<p align="right"><a href="#top">⬆️TOP</a></p>

### 모델 학습
- 모델: LSTM, RF, XGB, GB, HGB
- 평가 지표: RMSE

#### 각 모델 결과 비교
각 부품 번호별로 D+1일에서 7일의 평균 RMSE를 비교함


| 부품 번호 | LSTM | RF | XGB | GB | HGB |
| ------ | ------ | ------ | ------ | ------ | ------ |
| 6 | **8.874576** | 12.817189 | 12.883608 | 12.270567 | 9.435244 |
| 15 | **9.446987** | 10.150671 | 14.300918 | 10.865720 | 9.596393 |
| 16 | **15.963830** | 18.331679 | 19.382355 | 17.576702 | 16.641397 |
| 29 | **9.741370** | 17.067289 | 40.694170 | 13.159314 | 15.048942 |
| 94 | **6.102161** | 7.227756 | 6.590934 | 6.758569 | 6.245571 |

- 모든 부품에서 LSTM의 평균 RMSE가 가장 낮았으며, 가장 적합한 모델이라 판단하여 최종 모델로 선정

<br>

#### LSTM 모델 튜닝
오차를 더 줄여보고자 하이퍼파라미터 튜닝 진행

1. LSTM 뉴런 수 조정 (8, 16, 32, 64): 32로 결정
2. Dropout 비율 조정 (0.1~0.5): 0.2로 결정
3. 활성화 함수 변경 (relu, leaky_relu): leaky_relu로 결정
4. 옵티마이저 변경 (adam, sgd): adam으로 결정

<br>

| 부품 번호 | 튜닝 전 평균 RMSE | 튜닝 후 평균 RMSE | 차이 |
| ------ | ------ | ------ | ------ |
| 6 | **8.874576** | 9.408555 | -0.53398 |
| 15 | **9.446987** | 9.684718 | -0.23773 |
| 16 | 15.963830 | **15.692715** | 0.271115 |
| 29 | 9.741370 | **9.603837** | 0.137533 |
| 94 | 6.102161 | **6.089528** | 0.012633 |

- 부품 6과 15의 RMSE는 증가한 반면, 부품 16, 29, 96의 RMSE는 감소함
- 따라서 부품 6과 15는 튜닝 전 모델을, 부품 16, 29, 96은 튜닝 후 모델을 사용하기로 결정

<p align="right"><a href="#top">⬆️TOP</a></p>

### 원본 데이터와 비교
원본 데이터의 RMSE를 계산하여 LSTM 모델의 RMSE와 비교

| 부품 번호 | 원본 평균 RMSE | 모델 평균 RMSE | 차이 |
| ------ | ------ | ------ | ------ |
| 6 | 17.02273 | 8.874576 | 8.148154 |
| 15 | 28.706 | 9.446987 | 19.25901 |
| 16 | 188.8202 | 15.692715 | 173.1275 |
| 29 | 71.34143 | 9.603837 | 61.73759 |
| 94 | 23.76269 | 6.089528 | 17.67316 |

- LSTM 모델을 적용한 결과, 원본 데이터와 비교하여 평균 RMSE가 감소함
- 개발한 예측 모델을 활용하면 발주 계획의 오차를 줄이고, 오차로 인한 발주 비용을 절감하여 더 경제적일 것으로 보임

<p align="right"><a href="#top">⬆️TOP</a></p>

## 결론

해당 프로젝트에서는 부품 발주 계획의 정확성을 높이고 재고 관리 및 비용 절감을 위해 모델을 학습하였다. 이전 시간 단계의 정보를 활용하여 성능이 우수한 LSTM 모델과 과적합을 방지하는 앙상블 모델을 학습하였고, 가장 낮은 RMSE를 기록한 LSTM 모델을 최종 모델로 선정하였다. 하이퍼파라미터 튜닝을 통해 성능을 추가로 개선하였으며, 원본 데이터와 비교했을 때 LSTM 모델이 예측 오차를 크게 줄일 수 있었다. 따라서 개발된 예측 모델은 발주 계획의 오차를 줄이고, 오차로 인한 발주 비용을 절감하여 더 경제적일 것으로 보인다.<br><br>
또한, 긴급 발주 부품의 예측이 어려운 점을 감안할 때, 이들 부품에 대한 별도의 접근이 필요하다는 점이 확인되었다. 데이터의 기간이 좀 더 길었다면 발주 빈도, 사용 패턴, 계절성 등을 고려하여 학습할 수 있었을 것이다. 긴급 발주가 발생할 경우, 신속한 대응을 위해 표준 운영 절차를 마련해 두는 것이 필요하다.
